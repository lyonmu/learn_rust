/*
   æ‰€æœ‰æƒè§„åˆ™ï¼š
   1ã€Rust ä¸­çš„æ¯ä¸€ä¸ªå€¼éƒ½æœ‰ä¸€ä¸ªè¢«ç§°ä¸ºå…¶ æ‰€æœ‰è€…ï¼ˆownerï¼‰çš„å˜é‡
   2ã€å€¼åœ¨ä»»ä¸€æ—¶åˆ»æœ‰ä¸”åªæœ‰ä¸€ä¸ªæ‰€æœ‰è€…
   3ã€å½“æ‰€æœ‰è€…ï¼ˆå˜é‡ï¼‰ç¦»å¼€ä½œç”¨åŸŸï¼Œè¿™ä¸ªå€¼å°†è¢«ä¸¢å¼ƒ
*/
fn main() {
    // å˜é‡çš„å£°æ˜å‘¨æœŸä»å®ƒçš„å£°æ˜å¼€å§‹ï¼Œåˆ°å®ƒæ‰€åœ¨çš„ä½œç”¨åŸŸç»“æŸè€Œç»“æŸ
    let str = "hello";
    // å£°æ˜ä¸€ä¸ªå˜é‡str2å­˜å‚¨åœ¨å †ä¸Šåˆ†é…çš„æœªçŸ¥å¤§å°æ–‡æœ¬å¯¹è±¡çš„åœ°å€
    let mut str2 = String::from("hello2");

    // ä½¿ç”¨å‡½æ•°å¯¹å­—ç¬¦ä¸²str2å®ç°å­—ç¬¦ä¸²è¿½åŠ 
    str2.push_str(",uqingu");

    println!("Hello, world!{}", str);
    println!("Hello, world!{}", str2);

    /*
        Rustå¯¹å†…å­˜çš„ç®¡ç†ï¼š
        1ã€å†…å­˜åœ¨æ‹¥æœ‰å®ƒçš„å˜é‡ç¦»å¼€ä½œç”¨åŸŸåå°±è¢«è‡ªåŠ¨é‡Šæ”¾ã€‚
        2ã€å½“å˜é‡ç¦»å¼€ä½œç”¨åŸŸï¼ŒRust ä¸ºæˆ‘ä»¬è°ƒç”¨ä¸€ä¸ªç‰¹æ®Šçš„å‡½æ•°ã€‚è¿™ä¸ªå‡½æ•°å«åš dropï¼Œåœ¨è¿™é‡Œ String çš„ä½œè€…å¯ä»¥æ”¾ç½®é‡Šæ”¾å†…å­˜çš„ä»£ç ã€‚
        3ã€Rust åœ¨ç»“å°¾çš„ } å¤„è‡ªåŠ¨è°ƒç”¨ drop å‡½æ•°ã€‚

        String ç±»å‹çš„å˜é‡ç”±ä¸‰éƒ¨åˆ†ç»„æˆä¸€ä¸ªæŒ‡å‘å­˜æ”¾å­—ç¬¦ä¸²å†…å®¹å†…å­˜çš„æŒ‡é’ˆï¼Œä¸€ä¸ªé•¿åº¦ï¼Œå’Œä¸€ä¸ªå®¹é‡
        å½“æˆ‘ä»¬å£°æ˜ä¸€ä¸ªå˜é‡æ¥æ”¶ String ç±»å‹çš„æ•°æ®æ—¶ï¼Œå˜é‡ä¼šå­˜å‚¨åœ¨æ ˆä¸Šï¼ŒçœŸæ­£çš„å­—ç¬¦ä¸²çš„å†…å®¹åˆ™å­˜å‚¨åœ¨å †ç©ºé—´
    */

    let s1 = String::from("uqingu");
    let tup: (u8, bool, char, f64) = (2, true, 'ğŸƒ', 1.22);
    test_tup(&tup);
    let len = calculate_length(&s1);
    println!("å­—ç¬¦ä¸²çš„é•¿åº¦ä¸º:{}", len);

    let months = [
        "January",
        "February",
        "March",
        "April",
        "May",
        "June",
        "July",
        "August",
        "September",
        "October",
        "November",
        "December",
    ];
    test_array(&months);
    let s2 = s1;
    // s1èµ‹å€¼ç»™s2çš„æ“ä½œåœ¨Rustä¸­ç§°ä¹‹ä¸ºç§»åŠ¨ï¼Œåœ¨äº§ç”Ÿç§»åŠ¨æ“ä½œä¹‹åï¼Œs1å˜é‡å°†ä¼šæ˜¯ä¸€ä¸ªæ— æ•ˆçš„å¼•ç”¨
    // println!("{}",s1);

    println!("{}", s2);

    // Rust æ°¸è¿œä¹Ÿä¸ä¼šè‡ªåŠ¨åˆ›å»ºæ•°æ®çš„ â€œæ·±æ‹·è´â€ã€‚å› æ­¤ï¼Œä»»ä½• è‡ªåŠ¨ çš„å¤åˆ¶å¯ä»¥è¢«è®¤ä¸ºå¯¹è¿è¡Œæ—¶æ€§èƒ½å½±å“è¾ƒå°ã€‚
    // å¦‚æœæˆ‘ä»¬ ç¡®å® éœ€è¦æ·±åº¦å¤åˆ¶ String ä¸­å †ä¸Šçš„æ•°æ®ï¼Œè€Œä¸ä»…ä»…æ˜¯æ ˆä¸Šçš„æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨ä¸€ä¸ªå«åš clone çš„é€šç”¨å‡½æ•°
    let s3 = s2.clone();
    println!("{}", s2);
    println!("{}", s3);

    /*
        Rust æœ‰ä¸€ä¸ªå«åš Copy trait çš„ç‰¹æ®Šæ³¨è§£ï¼Œå¯ä»¥ç”¨åœ¨ç±»ä¼¼æ•´å‹è¿™æ ·çš„å­˜å‚¨åœ¨æ ˆä¸Šçš„ç±»å‹ä¸Šï¼ˆã€‚
        å¦‚æœä¸€ä¸ªç±»å‹å®ç°äº† Copy traitï¼Œé‚£ä¹ˆä¸€ä¸ªæ—§çš„å˜é‡åœ¨å°†å…¶èµ‹å€¼ç»™å…¶ä»–å˜é‡åä»ç„¶å¯ç”¨ã€‚
        Rust ä¸å…è®¸è‡ªèº«æˆ–å…¶ä»»ä½•éƒ¨åˆ†å®ç°äº† Drop trait çš„ç±»å‹ä½¿ç”¨ Copy traitã€‚
        å¦‚æœæˆ‘ä»¬å¯¹å…¶å€¼ç¦»å¼€ä½œç”¨åŸŸæ—¶éœ€è¦ç‰¹æ®Šå¤„ç†çš„ç±»å‹ä½¿ç”¨ Copy æ³¨è§£ï¼Œå°†ä¼šå‡ºç°ä¸€ä¸ªç¼–è¯‘æ—¶é”™è¯¯ã€‚
        å®ç°äº† Copy trait çš„ç±»å‹
        1ã€æ‰€æœ‰æ•´æ•°ç±»å‹ï¼Œæ¯”å¦‚ u32ã€‚
        2ã€å¸ƒå°”ç±»å‹ï¼Œboolï¼Œå®ƒçš„å€¼æ˜¯ true å’Œ falseã€‚
        3ã€æ‰€æœ‰æµ®ç‚¹æ•°ç±»å‹ï¼Œæ¯”å¦‚ f64ã€‚
        4ã€å­—ç¬¦ç±»å‹ï¼Œcharã€‚
        5ã€å…ƒç»„ï¼Œå½“ä¸”ä»…å½“å…¶åŒ…å«çš„ç±»å‹ä¹Ÿéƒ½å®ç° Copy çš„æ—¶å€™ã€‚æ¯”å¦‚ï¼Œ(i32, i32) å®ç°äº† Copyï¼Œä½† (i32, String) å°±æ²¡æœ‰ã€‚
    */

    // å°†å€¼ä¼ é€’ç»™å‡½æ•°åœ¨è¯­ä¹‰ä¸Šä¸ç»™å˜é‡èµ‹å€¼ç›¸ä¼¼ã€‚å‘å‡½æ•°ä¼ é€’å€¼å¯èƒ½ä¼šç§»åŠ¨æˆ–è€…å¤åˆ¶ï¼Œå°±åƒèµ‹å€¼è¯­å¥ä¸€æ ·ã€‚
    // è¿”å›å€¼ä¹Ÿå¯ä»¥è½¬ç§»æ‰€æœ‰æƒã€‚

    // å˜é‡çš„æ‰€æœ‰æƒæ€»æ˜¯éµå¾ªç›¸åŒçš„æ¨¡å¼ï¼šå°†å€¼èµ‹ç»™å¦ä¸€ä¸ªå˜é‡æ—¶ç§»åŠ¨å®ƒã€‚
    // å½“æŒæœ‰å †ä¸­æ•°æ®å€¼çš„å˜é‡ç¦»å¼€ä½œç”¨åŸŸæ—¶ï¼Œå…¶å€¼å°†é€šè¿‡ drop è¢«æ¸…ç†æ‰ï¼Œé™¤éæ•°æ®è¢«ç§»åŠ¨ä¸ºå¦ä¸€ä¸ªå˜é‡æ‰€æœ‰ã€‚
}

/*
    å¼•ç”¨:å¼•ç”¨ï¼ˆreferenceï¼‰åƒä¸€ä¸ªæŒ‡é’ˆï¼Œå› ä¸ºå®ƒæ˜¯ä¸€ä¸ªåœ°å€ï¼Œæˆ‘ä»¬å¯ä»¥ç”±æ­¤è®¿é—®å‚¨å­˜äºè¯¥åœ°å€çš„å±äºå…¶ä»–å˜é‡çš„æ•°æ®ã€‚
        ä¸æŒ‡é’ˆä¸åŒï¼Œå¼•ç”¨ç¡®ä¿æŒ‡å‘æŸä¸ªç‰¹å®šç±»å‹çš„æœ‰æ•ˆå€¼ã€‚ 
        æ­£å¦‚å˜é‡é»˜è®¤æ˜¯ä¸å¯å˜çš„ï¼Œå¼•ç”¨ä¹Ÿä¸€æ ·ã€‚ï¼ˆé»˜è®¤ï¼‰ä¸å…è®¸ä¿®æ”¹å¼•ç”¨çš„å€¼ã€‚
        ä¸€ä¸ªå¼•ç”¨çš„ä½œç”¨åŸŸä»å£°æ˜çš„åœ°æ–¹å¼€å§‹ä¸€ç›´æŒç»­åˆ°æœ€åä¸€æ¬¡ä½¿ç”¨ä¸ºæ­¢


    å¯å˜å¼•ç”¨:ä½¿ç”¨ mut å…³é”®å­—å®ç°å¯å˜å¼•ç”¨,å¯å˜å¼•ç”¨æœ‰ä¸€ä¸ªå¾ˆå¤§çš„é™åˆ¶ï¼šåœ¨åŒä¸€æ—¶é—´åªèƒ½æœ‰ä¸€ä¸ªå¯¹æŸä¸€ç‰¹å®šæ•°æ®çš„å¯å˜å¼•ç”¨ã€‚
        é˜²æ­¢åŒä¸€æ—¶é—´å¯¹åŒä¸€æ•°æ®è¿›è¡Œå¤šä¸ªå¯å˜å¼•ç”¨çš„é™åˆ¶å…è®¸å¯å˜æ€§ï¼Œä¸è¿‡æ˜¯ä»¥ä¸€ç§å—é™åˆ¶çš„æ–¹å¼å…è®¸ã€‚
        è¿™ä¸ªé™åˆ¶çš„å¥½å¤„æ˜¯ Rust å¯ä»¥åœ¨ç¼–è¯‘æ—¶å°±é¿å…æ•°æ®ç«äº‰ã€‚
        æ•°æ®ç«äº‰ï¼ˆdata raceï¼‰ç±»ä¼¼äºç«æ€æ¡ä»¶ï¼Œå®ƒå¯ç”±è¿™ä¸‰ä¸ªè¡Œä¸ºé€ æˆï¼š
            1ã€ä¸¤ä¸ªæˆ–æ›´å¤šæŒ‡é’ˆåŒæ—¶è®¿é—®åŒä¸€æ•°æ®ã€‚
            2ã€è‡³å°‘æœ‰ä¸€ä¸ªæŒ‡é’ˆè¢«ç”¨æ¥å†™å…¥æ•°æ®ã€‚
            3ã€æ²¡æœ‰åŒæ­¥æ•°æ®è®¿é—®çš„æœºåˆ¶ã€‚
        æ•°æ®ç«äº‰ä¼šå¯¼è‡´æœªå®šä¹‰è¡Œä¸ºï¼Œéš¾ä»¥åœ¨è¿è¡Œæ—¶è¿½è¸ªï¼Œå¹¶ä¸”éš¾ä»¥è¯Šæ–­å’Œä¿®å¤ï¼›Rust é¿å…äº†è¿™ç§æƒ…å†µçš„å‘ç”Ÿï¼Œå› ä¸ºå®ƒç”šè‡³ä¸ä¼šç¼–è¯‘å­˜åœ¨æ•°æ®ç«äº‰çš„ä»£ç ï¼
        ä¸èƒ½åœ¨æ‹¥æœ‰ä¸å¯å˜å¼•ç”¨çš„åŒæ—¶æ‹¥æœ‰å¯å˜å¼•ç”¨

    æ‚¬å‚å¼•ç”¨:åœ¨å…·æœ‰æŒ‡é’ˆçš„è¯­è¨€ä¸­ï¼Œå¾ˆå®¹æ˜“é€šè¿‡é‡Šæ”¾å†…å­˜æ—¶ä¿ç•™æŒ‡å‘å®ƒçš„æŒ‡é’ˆè€Œé”™è¯¯åœ°ç”Ÿæˆä¸€ä¸ªæ‚¬å‚æŒ‡é’ˆ,æ‰€è°“æ‚¬å‚æŒ‡é’ˆæ˜¯å…¶æŒ‡å‘çš„å†…å­˜å¯èƒ½å·²ç»è¢«åˆ†é…ç»™å…¶å®ƒæŒæœ‰è€…ã€‚
    ç›¸æ¯”ä¹‹ä¸‹ï¼Œåœ¨ Rust ä¸­ç¼–è¯‘å™¨ç¡®ä¿å¼•ç”¨æ°¸è¿œä¹Ÿä¸ä¼šå˜æˆæ‚¬å‚çŠ¶æ€ï¼šå½“ä½ æ‹¥æœ‰ä¸€äº›æ•°æ®çš„å¼•ç”¨ï¼Œç¼–è¯‘å™¨ç¡®ä¿æ•°æ®ä¸ä¼šåœ¨å…¶å¼•ç”¨ä¹‹å‰ç¦»å¼€ä½œç”¨åŸŸã€‚

    åœ¨ä»»æ„ç»™å®šæ—¶é—´ï¼Œè¦ä¹ˆ åªèƒ½æœ‰ä¸€ä¸ªå¯å˜å¼•ç”¨ï¼Œè¦ä¹ˆ åªèƒ½æœ‰å¤šä¸ªä¸å¯å˜å¼•ç”¨ã€‚
    å¼•ç”¨å¿…é¡»æ€»æ˜¯æœ‰æ•ˆçš„ã€‚
*/
// å¯¹åŸºæœ¬æ•°æ®ç±»å‹è¿›è¡Œå¼•ç”¨
fn calculate_length(s: &String) -> usize {
    s.len()
}

// å¯¹å…ƒç»„ç±»å‹è¿›è¡Œå¼•ç”¨
fn test_tup(tup: &(u8, bool, char, f64)) {
    println!("{}", tup.0);
    println!("{}", tup.1);
    println!("{}", tup.2);
    println!("{}", tup.3);
}

// å¯¹æ•°ç»„ç±»å‹è¿›è¡Œå¼•ç”¨
fn test_array(arr: &[&str; 12]) {
    // ä½¿ç”¨è¿­ä»£å™¨å’Œ for...in è¯­å¥è¿›è¡Œéå†
    for val in arr.iter() {
        println!("value is :{}", val);
    }
}
